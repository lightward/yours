name: Manual secrets 🛠️

on:
  workflow_dispatch:
    inputs:
      environment:
        description: Environment
        required: true
        default: staging
        type: environment
      update_behavior:
        description: Update mode
        required: true
        type: choice
        options:
          - 'stage_only'
          - 'stage_and_deploy'
        default: 'stage_only'

jobs:
  fly-secrets:
    name: Fly secrets
    uses: ./.github/workflows/fly-secrets.yml
    secrets: inherit
    with:
      environment: ${{ github.event.inputs.environment }}
      stage_only: ${{ github.event.inputs.update_behavior == 'stage_only' }}
