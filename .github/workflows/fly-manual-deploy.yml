name: Manual deploy 🛠️

on:
  workflow_dispatch:
    inputs:
      commitish:
        description: Commitish (branch, tag, sha)
        required: true
        default: main
        type: string
      environment:
        description: Environment
        required: true
        default: staging
        type: environment
      notes:
        description: Deploy notes
        required: true
        type: string

permissions:
  contents: read

jobs:
  fly-deploy:
    name: Fly deploy
    uses: ./.github/workflows/fly-deploy.yml
    secrets: inherit
    with:
      commitish: ${{ github.event.inputs.commitish }}
      environment: ${{ github.event.inputs.environment }}
      changelog: ${{ github.event.inputs.notes }}
