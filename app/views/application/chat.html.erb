<div data-controller="chat" data-chat-narrative-value="<%= @narrative.to_json %>" data-chat-universe-time-value="<%= current_resonance.universe_time %>" style="display: flex; flex-direction: column; gap: 1rem;">
  <div id="chat-log" data-chat-target="log" style="display: flex; flex-direction: column; gap: 1rem;">
    <!-- Messages will appear here -->
  </div>

  <textarea
    data-chat-target="input"
    data-action="keydown->chat#handleKeydown"
    placeholder="Type your message..."
    style="width: 100%; min-height: 100px;"
  ></textarea>

  <div style="display: flex; gap: 1rem; align-items: center;">
    <button
      data-action="click->chat#send"
    >
      Send
    </button>

    <%= button_to "End Day",
        integrate_path,
        method: :post,
        class: "exit",
        data: {
          turbo_confirm: "Are you sure? This will end the day and start a new one.",
          turbo_submits_with: "Ending day..."
        } %>
  </div>
</div>
